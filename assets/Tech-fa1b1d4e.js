import{_ as x}from"./time-dd149834.js";import{u as r,g as U,f as A,a as F,b as P}from"./index-4c1189a7.js";import{_ as V}from"./ImgBox.vue_vue_type_style_index_0_lang-9f9adc67.js";import{d as S,b as B,c,h as _,f as i,F as N,i as C,e as L,s as j,k as b,w as k,g as p,u as E,l as H,v as M,A as R,x as G,r as J,a as z,n as I,o as K,t as w,y as O,p as Q,m as W}from"./index-44637e8a.js";import{_ as q}from"./BannerBox.vue_vue_type_style_index_0_lang-e2c42fde.js";import{_ as X}from"./InfoBox.vue_vue_type_style_index_0_lang-028d11cb.js";const Y={class:"timeline-content"},Z={class:"timeline-list"},ee={class:"list-year"},te={class:"list-box-info"},ae={class:"list-img"},se={class:"list-desc"},ne={class:"desc-date"},oe=i("img",{class:"date-icon",src:x},null,-1),ie={class:"date"},ce={class:"desc-title"},le={class:"desc-subtitle"},re={class:"pager-content"},_e={key:1},D=S({__name:"TimelineList",props:{list:{default:()=>[]},total:{default:0},pageSize:{default:10},pageNo:{default:1},bannerUrl:{default:""},onPageChange:{type:Function,default:()=>{}}},setup(t){return(s,l)=>{const a=R,u=B("router-link"),m=j;return c(),_("div",Y,[i("div",Z,[(c(!0),_(N,null,C(s.list,(o,f)=>(c(),_("div",{key:f},[o.list.length?(c(),_(N,{key:0},[i("div",ee,b(o.date),1),i("div",te,[(c(!0),_(N,null,C(o.list,(n,h)=>(c(),L(u,{to:`/article/tech/${o.date}/${n.id}`,class:"list-box"},{default:k(()=>[i("div",ae,[(c(),L(V,{key:n.id,src:n.cover},null,8,["src"]))]),i("div",se,[i("div",ne,[p(a,{size:"small",src:n.authorAvatar},null,8,["src"]),oe,i("span",ie,b(E(H)(n.createDate).format("LL")),1)]),i("div",ce,b(n.title),1),i("div",le,b(n.subTitle),1)])]),_:2},1032,["to"]))),256))])],64)):M("",!0)]))),128))]),i("div",re,[s.total?(c(),L(m,{key:0,"show-total":o=>`Total ${o} article`,"page-size":s.pageSize,current:s.pageNo,total:s.total,"on-change":s.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(c(),_("span",_e,"这个作者很懒，什么都没有写~~"))])])}}});const pe=S({ame:"Tech",components:{BannerBox:q,BlogInfo:X,TimelineList:D},watch:{$route:{handler(t,s){var l,a;((l=t.query)==null?void 0:l.page)!==((a=s.query)==null?void 0:a.page)&&this.initData()},deep:!0}},setup(){var v;const t=G(),s=J(""),l=z({categories:[],tags:[],articleList:[]}),a=z({total:0,pageSize:10,pageNo:Number((v=t.query)==null?void 0:v.page)||1}),u=z({nickName:"",description:""}),m=I.findIndex(e=>e.title_en==="TECH");m>-1&&(s.value=I[m].bannerImgUrl);const o=async(e,g,d,$)=>{a.pageSize=g,a.pageNo=e;const T={pageNo:e,pageSize:g,type:1};d>0&&(T.categoryId=d),$>0&&(T.tagId=$),(!r().list.length||d!==Number(r().categoryId)||$!==Number(r().tagId)||g!==Number(r().pageSize))&&await U(T),r().$patch({pageNo:a.pageNo,pageSize:a.pageSize}),l.articleList=r().list[a.pageNo-1],a.total=r().total},f=async()=>{const e=await A();e&&(u.nickName=e==null?void 0:e.nickName,u.description=e==null?void 0:e.description)},n=async()=>{const e=await F();e&&(l.tags=e)},h=async()=>{const e=await P();e&&(l.categories=e)},y=()=>{var e,g,d;a.pageNo=Number((e=t.query)==null?void 0:e.page)||1,o(a.pageNo,a.pageSize,Number((g=t.query)==null?void 0:g.category),Number((d=t.query)==null?void 0:d.tag))};return K(()=>{y(),n(),h(),f()}),{...w(u),...w(l),...w(a),bannerImgUrl:s,handlePage:o,initData:y}}});function ue(t,s,l,a,u,m){const o=q,f=B("blog-info"),n=W,h=D,y=Q;return c(),_(N,null,[p(o,{title:"Technology","banner-url":t.bannerImgUrl},null,8,["banner-url"]),p(y,{justify:"center",gutter:0,class:"tech-content"},{default:k(()=>[p(n,{xs:22,lg:9,xl:8,xxl:8,class:"tech-left"},{default:k(()=>[p(f,{"nick-name":t.nickName,description:t.description,categories:t.categories,tags:t.tags,onUpdateData:t.initData},null,8,["nick-name","description","categories","tags","onUpdateData"])]),_:1}),p(n,{xs:22,lg:12,xl:12,xxl:12,class:"tech-right"},{default:k(()=>[p(h,{list:t.articleList,total:t.total,"page-size":t.pageSize,"page-no":t.pageNo,"on-page-change":v=>t.$router.push({name:"Tech",query:{page:v}})},null,8,["list","total","page-size","page-no","on-page-change"])]),_:1})]),_:1})],64)}const ve=O(pe,[["render",ue]]);export{ve as default};
