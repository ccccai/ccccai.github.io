import{_ as q}from"./time-dd149834.js";import{h as f,i as x}from"./index-9c665c4e.js";import{_ as A}from"./ImgBox.vue_vue_type_style_index_0_lang-ecc94166.js";import{d as L,t as v,b as n,j as $,w as b,u as _,h as E,e as s,g as m,l as h,m as U,A as j,z as k,c as d,F as y,i as z,f as P,v as V,x as R,y as T,r as C,a as S,n as N,o as M,_ as G,q as H}from"./index-81f77f6b.js";import{_ as F}from"./BannerBox.vue_vue_type_style_index_0_lang-848a63d8.js";const J={class:"list-img"},K={class:"list-desc"},O={class:"desc-title"},Q={class:"desc-subtitle"},W={class:"desc-date"},X=s("img",{class:"date-icon",src:q},null,-1),Y={class:"date"},Z={class:"desc-text"},I=L({__name:"NoteItem",props:{data:{default:()=>({})},year:{default:""}},setup(e){const l=e,{id:r,cover:t,title:g,subTitle:u,authorAvatar:i,createDate:c,description:a}=v(l.data);return(o,p)=>{const w=j,D=E("router-link");return n(),$(D,{to:`/article/life/${o.year}/${_(r)}`,class:"note-list-box"},{default:b(()=>[s("div",J,[m(A,{src:_(t)},null,8,["src"])]),s("div",K,[s("div",O,h(_(g)),1),s("div",Q,h(_(u)),1),s("div",W,[m(w,{size:"small",src:_(i)},null,8,["src"]),X,s("span",Y,h(_(U)(_(c)).format("LL")),1)]),s("div",Z,h(_(a)),1)])]),_:1},8,["to"])}}});const ee=L({name:"NotesList",components:{NoteItem:I},props:{list:{type:Array,default:[]},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageNo:{type:Number,default:1},onPageChange:{type:Function,default:()=>{}},bannerUrl:{type:String,default:""}}});const te={class:"notes-content"},ae={class:"list-year"},se={class:"list-box-info"},oe={class:"pager-content"},ne={key:1};function re(e,l,r,t,g,u){const i=I,c=V;return n(),d("div",te,[s("div",{class:"notes-list",style:P({backgroundImage:`url(${e.bannerUrl})`})},[(n(!0),d(y,null,z(e.list,(a,o)=>(n(),d("div",{key:o},[a.list.length?(n(),d(y,{key:0},[s("div",ae,h(a.date),1),s("div",se,[(n(!0),d(y,null,z(a.list,p=>(n(),$(i,{year:a.date,data:p},null,8,["year","data"]))),256))])],64)):R("",!0)]))),128))],4),s("div",oe,[e.total?(n(),$(c,{key:0,"show-total":a=>`Total ${a} article`,"page-size":e.pageSize,current:e.pageNo,total:e.total,"on-change":e.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(n(),d("span",ne,"这个作者很懒，什么都没有写~~"))])])}const B=k(ee,[["render",re]]),le=L({ame:"Life",components:{BannerBox:F,NoteList:B},watch:{$route:{handler(e,l){var r,t;((r=e.query)==null?void 0:r.page)!==((t=l.query)==null?void 0:t.page)&&this.initData()},deep:!0}},setup(){var a;const e=T(),l=C(""),r=C(""),t=S({total:0,pageSize:10,pageNo:Number((a=e.query)==null?void 0:a.page)||1}),g=S({articleList:[]}),u=N.findIndex(o=>o.titleEN==="LIFE");u>-1&&(l.value=N[u].bannerImgUrl,r.value=N[u].bgColor),M(()=>{i()});const i=()=>{var o;t.pageNo=Number((o=e.query)==null?void 0:o.page)||1,c(t.pageNo,t.pageSize)},c=async(o,p)=>{t.pageSize=p,t.pageNo=o,(!f().list.length||p!==Number(f().pageSize))&&await x(t),f().$patch({pageNo:t.pageNo,pageSize:t.pageSize}),g.articleList=f().list[t.pageNo-1],t.total=f().total};return{...v(g),...v(t),bannerImgUrl:l,bannerBgColor:r,initData:i,handlePage:c}}}),ie={class:"life-content"};function ce(e,l,r,t,g,u){const i=F,c=B,a=H,o=G;return n(),d(y,null,[m(i,{title:"Life Notes","bg-color":e.bannerBgColor,"banner-url":e.bannerImgUrl},null,8,["bg-color","banner-url"]),m(o,{justify:"center"},{default:b(()=>[m(a,{xs:22,sm:22,md:22,lg:22,xl:18,xxl:18,class:"life-box"},{default:b(()=>[s("div",ie,[m(c,{list:e.articleList,total:e.total,"page-size":e.pageSize,"page-no":e.pageNo,"on-page-change":p=>e.$router.push({name:"Life",query:{page:p}})},null,8,["list","total","page-size","page-no","on-page-change"])])]),_:1})]),_:1})],64)}const me=k(le,[["render",ce]]);export{me as default};
