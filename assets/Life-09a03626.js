import{_ as D}from"./time-dd149834.js";import{h as m,i as q}from"./index-2abc6cdb.js";import{_ as A}from"./ImgBox.vue_vue_type_style_index_0_lang-315a5238.js";import{d as b,t as N,b as B,c as n,e as $,w as v,u as _,f as s,h as g,l as f,m as E,A as U,z as k,i as u,F as y,j as L,g as j,v as P,x as V,y as R,r as T,a as z,n as S,o as M,q as G,p as H}from"./index-54a157c3.js";import{_ as C}from"./BannerBox.vue_vue_type_style_index_0_lang-ea63c0c4.js";const J={class:"list-img"},K={class:"list-desc"},O={class:"desc-title"},Q={class:"desc-subtitle"},W={class:"desc-date"},X=s("img",{class:"date-icon",src:D},null,-1),Y={class:"date"},Z={class:"desc-text"},F=b({__name:"NoteItem",props:{data:{default:()=>({})},year:{default:""}},setup(e){const i=e,{id:t,cover:o,title:p,subTitle:d,authorAvatar:r,createDate:l,description:a}=N(i.data);return(c,h)=>{const w=U,x=B("router-link");return n(),$(x,{to:`/article/life/${c.year}/${_(t)}`,class:"note-list-box"},{default:v(()=>[s("div",J,[g(A,{src:_(o)},null,8,["src"])]),s("div",K,[s("div",O,f(_(p)),1),s("div",Q,f(_(d)),1),s("div",W,[g(w,{size:"small",src:_(r)},null,8,["src"]),X,s("span",Y,f(_(E)(_(l)).format("LL")),1)]),s("div",Z,f(_(a)),1)])]),_:1},8,["to"])}}});const ee=b({name:"NotesList",components:{NoteItem:F},props:{list:{type:Array,default:[]},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageNo:{type:Number,default:1},onPageChange:{type:Function,default:()=>{}},bannerUrl:{type:String,default:""}}});const te={class:"notes-content"},ae={class:"list-year"},se={class:"list-box-info"},ne={class:"pager-content"},oe={key:1};function ie(e,i,t,o,p,d){const r=F,l=P;return n(),u("div",te,[s("div",{class:"notes-list",style:j({backgroundImage:`url(${e.bannerUrl})`})},[(n(!0),u(y,null,L(e.list,(a,c)=>(n(),u("div",{key:c},[a.list.length?(n(),u(y,{key:0},[s("div",ae,f(a.date),1),s("div",se,[(n(!0),u(y,null,L(a.list,h=>(n(),$(r,{year:a.date,data:h},null,8,["year","data"]))),256))])],64)):V("",!0)]))),128))],4),s("div",ne,[e.total?(n(),$(l,{key:0,"show-total":a=>`Total ${a} article`,"page-size":e.pageSize,current:e.pageNo,total:e.total,"on-change":e.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(n(),u("span",oe,"这个作者很懒，什么都没有写~~"))])])}const I=k(ee,[["render",ie]]),re=b({ame:"Life",components:{BannerBox:C,NoteList:I},watch:{$route:{handler(e,i){var t,o;((t=e.query)==null?void 0:t.page)!==((o=i.query)==null?void 0:o.page)&&this.initData()},deep:!0}},setup(){var l;const e=R(),i=T(""),t=z({total:0,pageSize:10,pageNo:Number((l=e.query)==null?void 0:l.page)||1}),o=z({articleList:[]}),p=S.findIndex(a=>a.title_en==="LIFE");p>-1&&(i.value=S[p].bannerImgUrl),M(()=>{d()});const d=()=>{var a;t.pageNo=Number((a=e.query)==null?void 0:a.page)||1,r(t.pageNo,t.pageSize)},r=async(a,c)=>{t.pageSize=c,t.pageNo=a,(!m().list.length||c!==Number(m().pageSize))&&await q(t),m().$patch({pageNo:t.pageNo,pageSize:t.pageSize}),o.articleList=m().list[t.pageNo-1],t.total=m().total};return{...N(o),...N(t),bannerImgUrl:i,initData:d,handlePage:r}}}),le={class:"life-content"};function ce(e,i,t,o,p,d){const r=C,l=I,a=H,c=G;return n(),u(y,null,[g(r,{title:"Life Notes","banner-url":e.bannerImgUrl},null,8,["banner-url"]),g(c,{justify:"center"},{default:v(()=>[g(a,{xs:22,sm:22,md:22,lg:22,xl:18,xxl:18,class:"life-box"},{default:v(()=>[s("div",le,[g(l,{list:e.articleList,total:e.total,"page-size":e.pageSize,"page-no":e.pageNo,"on-page-change":h=>e.$router.push({name:"Life",query:{page:h}})},null,8,["list","total","page-size","page-no","on-page-change"])])]),_:1})]),_:1})],64)}const me=k(re,[["render",ce]]);export{me as default};
