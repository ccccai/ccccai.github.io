import{d as q,b as p,c,i as g,f as o,F as N,j as C,e as I,l as v,w as k,h as l,u as B,m as D,p as U,q as x,r as j,a as z,n as S,o as A,t as w,_ as F}from"./index-5c68b5a0.js";import{_ as P}from"./BannerBox.vue_vue_type_style_index_0_lang-9a9a054b.js";import{_ as V}from"./InfoBox.vue_vue_type_style_index_0_lang-ee368711.js";import{_ as E}from"./time-dd149834.js";import{u as _,g as H,f as M,a as R,b as G}from"./index-e2593150.js";import{_ as J}from"./ImgBox.vue_vue_type_style_index_0_lang-d34da600.js";const K={class:"timeline-content"},O={class:"timeline-list"},Q={class:"list-year"},W={class:"list-box-info"},X={class:"list-img"},Y={class:"list-desc"},Z={class:"desc-date"},ee=o("img",{class:"date-icon",src:E},null,-1),te={class:"date"},ae={class:"desc-title"},se={class:"desc-subtitle"},ne={class:"pager-content"},oe={key:1},ie=q({__name:"TimelineList",props:{list:{default:()=>[]},total:{default:0},pageSize:{default:10},pageNo:{default:1},bannerUrl:{default:""},onPageChange:{type:Function,default:()=>{}}},setup(t){return(s,r)=>{const a=p("a-avatar"),u=p("router-link"),f=p("a-pagination");return c(),g("div",K,[o("div",O,[(c(!0),g(N,null,C(s.list,(i,h)=>(c(),g("div",{key:h},[i.list.length?(c(),g(N,{key:0},[o("div",Q,v(i.date),1),o("div",W,[(c(!0),g(N,null,C(i.list,n=>(c(),I(u,{to:`/article?id=${n.id}`,class:"list-box"},{default:k(()=>[o("div",X,[l(J,{src:n.cover},null,8,["src"])]),o("div",Y,[o("div",Z,[l(a,{size:"small",src:n.authorAvatar},null,8,["src"]),ee,o("span",te,v(B(D)(n.createDate).format("LL")),1)]),o("div",ae,v(n.title),1),o("div",se,v(n.subTitle),1)])]),_:2},1032,["to"]))),256))])],64)):U("",!0)]))),128))]),o("div",ne,[s.total?(c(),I(f,{key:0,"show-total":i=>`Total ${i} article`,"page-size":s.pageSize,current:s.pageNo,total:s.total,"on-change":s.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(c(),g("span",oe,"这个作者很懒，什么都没有写~~"))])])}}});const re=q({ame:"Tech",components:{BannerBox:P,BlogInfo:V,TimelineList:ie},watch:{$route:{handler(t,s){var r,a;((r=t.query)==null?void 0:r.page)!==((a=s.query)==null?void 0:a.page)&&this.initData()},deep:!0}},setup(){var b;const t=x(),s=j(""),r=z({categories:[],tags:[],articleList:[]}),a=z({total:0,pageSize:10,pageNo:Number((b=t.query)==null?void 0:b.page)||1}),u=z({nickName:"",description:""}),f=S.findIndex(e=>e.title_en==="TECH");f>-1&&(s.value=S[f].bannerImgUrl);const i=async(e,d,m,L)=>{a.pageSize=d,a.pageNo=e;const $={pageNo:e,pageSize:d,type:1};m>0&&($.categoryId=m),L>0&&($.tagId=L),(!_().list.length||m!==Number(_().categoryId)||L!==Number(_().tagId)||d!==Number(_().pageSize))&&await H($),_().$patch({pageNo:a.pageNo,pageSize:a.pageSize}),r.articleList=_().list[a.pageNo-1],a.total=_().total},h=async()=>{const e=await M();e&&(u.nickName=e==null?void 0:e.nickName,u.description=e==null?void 0:e.description)},n=async()=>{const e=await R();e&&(r.tags=e)},T=async()=>{const e=await G();e&&(r.categories=e)},y=()=>{var e,d,m;a.pageNo=Number((e=t.query)==null?void 0:e.page)||1,i(a.pageNo,a.pageSize,Number((d=t.query)==null?void 0:d.category),Number((m=t.query)==null?void 0:m.tag))};return A(()=>{y(),n(),T(),h()}),{...w(u),...w(r),...w(a),bannerImgUrl:s,handlePage:i,initData:y}}});function ce(t,s,r,a,u,f){const i=p("banner-box"),h=p("blog-info"),n=p("a-col"),T=p("timeline-list"),y=p("a-row");return c(),g(N,null,[l(i,{title:"Technology","banner-url":t.bannerImgUrl},null,8,["banner-url"]),l(y,{justify:"center",gutter:0,class:"tech-content"},{default:k(()=>[l(n,{xs:22,lg:9,xl:8,xxl:8,class:"tech-left"},{default:k(()=>[l(h,{"nick-name":t.nickName,description:t.description,categories:t.categories,tags:t.tags,onUpdateData:t.initData},null,8,["nick-name","description","categories","tags","onUpdateData"])]),_:1}),l(n,{xs:22,lg:12,xl:12,xxl:12,class:"tech-right"},{default:k(()=>[l(T,{list:t.articleList,total:t.total,"page-size":t.pageSize,"page-no":t.pageNo,"on-page-change":b=>t.$router.push({name:"Tech",query:{page:b}})},null,8,["list","total","page-size","page-no","on-page-change"])]),_:1})]),_:1})],64)}const me=F(re,[["render",ce]]);export{me as default};
