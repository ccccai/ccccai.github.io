import{d as L,t as v,b as p,c as o,e as $,w as b,u,f as s,g as I,l as f,h,m as x,_ as C,i as _,F as N,j as z,p as D,q,r as B,a as S,n as k,o as E}from"./index-65e8ba7d.js";import{_ as U}from"./BannerBox.vue_vue_type_style_index_0_lang-c56d916c.js";import{_ as A}from"./time-dd149834.js";import{h as m,i as j}from"./index-0b9af85b.js";const P={class:"list-desc"},V={class:"desc-title"},R={class:"desc-subtitle"},T={class:"desc-date"},M=s("img",{class:"date-icon",src:A},null,-1),G={class:"date"},H={class:"desc-text"},J=L({__name:"NoteItem",props:{data:{default:()=>({})},year:{default:""}},setup(e){const r=e,{id:t,cover:n,title:d,subTitle:g,authorAvatar:i,createDate:l,description:a}=v(r.data);return(c,y)=>{const F=p("a-avatar"),w=p("router-link");return o(),$(w,{to:`/article/life/${c.year}/${u(t)}`,class:"note-list-box"},{default:b(()=>[s("div",{class:"list-img",style:I({backgroundImage:`url(${u(n)})`})},null,4),s("div",P,[s("div",V,f(u(d)),1),s("div",R,f(u(g)),1),s("div",T,[h(F,{size:"small",src:u(i)},null,8,["src"]),M,s("span",G,f(u(x)(u(l)).format("LL")),1)]),s("div",H,f(u(a)),1)])]),_:1},8,["to"])}}});const K=L({name:"NotesList",components:{NoteItem:J},props:{list:{type:Array,default:[]},total:{type:Number,default:0},pageSize:{type:Number,default:10},pageNo:{type:Number,default:1},onPageChange:{type:Function,default:()=>{}},bannerUrl:{type:String,default:""}}});const O={class:"notes-content"},Q={class:"list-year"},W={class:"list-box-info"},X={class:"pager-content"},Y={key:1};function Z(e,r,t,n,d,g){const i=p("note-item"),l=p("a-pagination");return o(),_("div",O,[s("div",{class:"notes-list",style:I({backgroundImage:`url(${e.bannerUrl})`})},[(o(!0),_(N,null,z(e.list,(a,c)=>(o(),_("div",{key:c},[a.list.length?(o(),_(N,{key:0},[s("div",Q,f(a.date),1),s("div",W,[(o(!0),_(N,null,z(a.list,y=>(o(),$(i,{year:a.date,data:y},null,8,["year","data"]))),256))])],64)):D("",!0)]))),128))],4),s("div",X,[e.total?(o(),$(l,{key:0,"show-total":a=>`Total ${a} article`,"page-size":e.pageSize,current:e.pageNo,total:e.total,"on-change":e.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(o(),_("span",Y,"这个作者很懒，什么都没有写~~"))])])}const ee=C(K,[["render",Z]]),te=L({ame:"Life",components:{BannerBox:U,NoteList:ee},watch:{$route:{handler(e,r){var t,n;((t=e.query)==null?void 0:t.page)!==((n=r.query)==null?void 0:n.page)&&this.initData()},deep:!0}},setup(){var l;const e=q(),r=B(""),t=S({total:0,pageSize:10,pageNo:Number((l=e.query)==null?void 0:l.page)||1}),n=S({articleList:[]}),d=k.findIndex(a=>a.title_en==="LIFE");d>-1&&(r.value=k[d].bannerImgUrl),E(()=>{g()});const g=()=>{var a;t.pageNo=Number((a=e.query)==null?void 0:a.page)||1,i(t.pageNo,t.pageSize)},i=async(a,c)=>{t.pageSize=c,t.pageNo=a,(!m().list.length||c!==Number(m().pageSize))&&await j(t),m().$patch({pageNo:t.pageNo,pageSize:t.pageSize}),n.articleList=m().list[t.pageNo-1],t.total=m().total};return{...v(n),...v(t),bannerImgUrl:r,initData:g,handlePage:i}}}),ae={class:"life-content"};function se(e,r,t,n,d,g){const i=p("banner-box"),l=p("note-list"),a=p("a-col"),c=p("a-row");return o(),_(N,null,[h(i,{title:"Life Notes","banner-url":e.bannerImgUrl},null,8,["banner-url"]),h(c,{justify:"center"},{default:b(()=>[h(a,{xs:22,sm:22,lg:22,xl:18,xxl:16,class:"life-box"},{default:b(()=>[s("div",ae,[h(l,{list:e.articleList,total:e.total,"page-size":e.pageSize,"page-no":e.pageNo,"on-page-change":y=>e.$router.push({name:"Life",query:{page:y}})},null,8,["list","total","page-size","page-no","on-page-change"])])]),_:1})]),_:1})],64)}const le=C(te,[["render",se]]);export{le as default};
