import{d as q,b as c,c as r,i as p,f as i,F as N,j as I,e as S,l as v,w as k,g as B,h as u,u as D,m as U,p as x,q as j,r as A,a as L,n as C,o as F,t as w,_ as P}from"./index-a604883f.js";import{_ as V}from"./BannerBox.vue_vue_type_style_index_0_lang-29e19241.js";import{_ as E}from"./InfoBox.vue_vue_type_style_index_0_lang-90ce5f76.js";import{_ as H}from"./time-dd149834.js";import{u as g,g as M,f as R,a as G,b as J}from"./index-3ecc3add.js";const K={class:"timeline-content"},O={class:"timeline-list"},Q={class:"list-year"},W={class:"list-box-info"},X={class:"list-desc"},Y={class:"desc-date"},Z=i("img",{class:"date-icon",src:H},null,-1),ee={class:"date"},te={class:"desc-title"},ae={class:"desc-subtitle"},se={class:"pager-content"},ne={key:1},oe=q({__name:"TimelineList",props:{list:{default:()=>[]},total:{default:0},pageSize:{default:10},pageNo:{default:1},bannerUrl:{default:""},onPageChange:{type:Function,default:()=>{}}},setup(t){return(s,l)=>{const a=c("a-avatar"),_=c("router-link"),f=c("a-pagination");return r(),p("div",K,[i("div",O,[(r(!0),p(N,null,I(s.list,(n,h)=>(r(),p("div",{key:h},[n.list.length?(r(),p(N,{key:0},[i("div",Q,v(n.date),1),i("div",W,[(r(!0),p(N,null,I(n.list,o=>(r(),S(_,{to:`/article/tech/${n.date}/${o.id}`,class:"list-box"},{default:k(()=>[i("div",{class:"list-img",style:B({backgroundImage:`url(${o.cover})`})},null,4),i("div",X,[i("div",Y,[u(a,{size:"small",src:o.authorAvatar},null,8,["src"]),Z,i("span",ee,v(D(U)(o.createDate).format("LL")),1)]),i("div",te,v(o.title),1),i("div",ae,v(o.subTitle),1)])]),_:2},1032,["to"]))),256))])],64)):x("",!0)]))),128))]),i("div",se,[s.total?(r(),S(f,{key:0,"show-total":n=>`Total ${n} article`,"page-size":s.pageSize,current:s.pageNo,total:s.total,"on-change":s.onPageChange},null,8,["show-total","page-size","current","total","on-change"])):(r(),p("span",ne,"这个作者很懒，什么都没有写~~"))])])}}});const ie=q({ame:"Tech",components:{BannerBox:V,BlogInfo:E,TimelineList:oe},watch:{$route:{handler(t,s){var l,a;((l=t.query)==null?void 0:l.page)!==((a=s.query)==null?void 0:a.page)&&this.initData()},deep:!0}},setup(){var b;const t=j(),s=A(""),l=L({categories:[],tags:[],articleList:[]}),a=L({total:0,pageSize:10,pageNo:Number((b=t.query)==null?void 0:b.page)||1}),_=L({nickName:"",description:""}),f=C.findIndex(e=>e.title_en==="TECH");f>-1&&(s.value=C[f].bannerImgUrl);const n=async(e,d,m,$)=>{a.pageSize=d,a.pageNo=e;const z={pageNo:e,pageSize:d,type:1};m>0&&(z.categoryId=m),$>0&&(z.tagId=$),(!g().list.length||m!==Number(g().categoryId)||$!==Number(g().tagId)||d!==Number(g().pageSize))&&await M(z),g().$patch({pageNo:a.pageNo,pageSize:a.pageSize}),l.articleList=g().list[a.pageNo-1],a.total=g().total},h=async()=>{const e=await R();e&&(_.nickName=e==null?void 0:e.nickName,_.description=e==null?void 0:e.description)},o=async()=>{const e=await G();e&&(l.tags=e)},T=async()=>{const e=await J();e&&(l.categories=e)},y=()=>{var e,d,m;a.pageNo=Number((e=t.query)==null?void 0:e.page)||1,n(a.pageNo,a.pageSize,Number((d=t.query)==null?void 0:d.category),Number((m=t.query)==null?void 0:m.tag))};return F(()=>{y(),o(),T(),h()}),{...w(_),...w(l),...w(a),bannerImgUrl:s,handlePage:n,initData:y}}});function le(t,s,l,a,_,f){const n=c("banner-box"),h=c("blog-info"),o=c("a-col"),T=c("timeline-list"),y=c("a-row");return r(),p(N,null,[u(n,{title:"Technology","banner-url":t.bannerImgUrl},null,8,["banner-url"]),u(y,{justify:"center",gutter:0,class:"tech-content"},{default:k(()=>[u(o,{xs:22,lg:9,xl:8,xxl:8,class:"tech-left"},{default:k(()=>[u(h,{"nick-name":t.nickName,description:t.description,categories:t.categories,tags:t.tags,onUpdateData:t.initData},null,8,["nick-name","description","categories","tags","onUpdateData"])]),_:1}),u(o,{xs:22,lg:12,xl:12,xxl:12,class:"tech-right"},{default:k(()=>[u(T,{list:t.articleList,total:t.total,"page-size":t.pageSize,"page-no":t.pageNo,"on-page-change":b=>t.$router.push({name:"Tech",query:{page:b}})},null,8,["list","total","page-size","page-no","on-page-change"])]),_:1})]),_:1})],64)}const _e=P(ie,[["render",le]]);export{_e as default};
